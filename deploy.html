<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Deploy GMbanditV2</title>

<script src="https://unpkg.com/ethers@5.7.2/dist/ethers.umd.min.js"></script>
<script src="https://unpkg.com/@walletconnect/web3modal@1.9.12/dist/index.min.js"></script>

<style>
body {background:#0f0f1b;color:white;font-family:Arial;text-align:center;padding:20px;}
.box {background:#1a1a2e;padding:20px;border-radius:10px;max-width:400px;margin:auto;}
input {width:90%;padding:14px;font-size:16px;border-radius:10px;border:none;margin-bottom:15px;}
button {padding:14px 20px;border-radius:10px;margin:10px;border:none;font-size:18px;cursor:pointer;}
#connectBtn{background:#1E5EFF;color:white;}
#disconnectBtn{background:red;display:none;}
.deploy{background:#327cff;width:90%;}
.back{color:#8ab4ff;text-decoration:none;}
</style>

</head>

<body>

<h2>Deploy your GMbanditV2 Contract</h2>
<p>Deploy private version on Base Mainnet</p>

<button id="connectBtn">Connect Wallet</button>
<button id="disconnectBtn">Disconnect</button>

<div class="box">
  <input id="ownerAddr" placeholder="Owner Address">
  <input id="collectorAddr" placeholder="Collector Address">
  <button class="deploy" onclick="deployContract()">Deploy Now üöÄ</button>
</div>

<a href="/" class="back">‚Üê Back to Dashboard</a>

<script>
let provider, signer;

let web3Modal = new window.Web3Modal.default({
  cacheProvider:false,
  providerOptions:{
    walletconnect:{
      package: window.WalletConnectProvider.default,
      options:{ rpc:{ 8453: "https://mainnet.base.org" } }
    }
  }
});

async function connectWallet(){
  try{
    const instance = await web3Modal.connect();
    provider = new ethers.providers.Web3Provider(instance);
    signer = provider.getSigner();
    let addr = await signer.getAddress();
    document.getElementById("connectBtn").textContent = addr.slice(0,6)+"..."+addr.slice(-4);
    document.getElementById("disconnectBtn").style.display="inline-block";
  }catch(e){
    alert("Failed: "+e.message);
  }
}

function disconnectWallet(){
  if(web3Modal.clearCachedProvider) web3Modal.clearCachedProvider();
  signer=null;
  provider=null;
  document.getElementById("connectBtn").textContent="Connect Wallet";
  document.getElementById("disconnectBtn").style.display="none";
}

async function deployContract(){
  if(!signer){ alert("Connect wallet first!"); return;}
  alert("Deploy disabled (placeholder).");
}

document.getElementById("connectBtn").onclick = connectWallet;
document.getElementById("disconnectBtn").onclick = disconnectWallet;

</script>

</body>
</html>
