<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Deploy Contract</title>

<script src="https://unpkg.com/ethers@5.7.2/dist/ethers.umd.min.js"></script>
<script src="https://unpkg.com/@rainbow-me/rainbowkit-connector@1.0.0/dist/rkc.js"></script>

<style>
body {
  margin: 0;
  padding: 30px 20px;
  background:#0f0f1b;
  color:white;
  font-family: Arial, sans-serif;
  text-align:center;
}
.box {
  background:#1a1a2e;
  padding:20px;
  border-radius:10px;
  max-width:400px;
  margin:auto;
}
input {
  width:90%;
  padding:14px;
  font-size:16px;
  border-radius:10px;
  border:none;
  margin-bottom:15px;
}
.deploy-btn {
  background:#327cff;
  border:none;
  width:90%;
  padding:15px;
  font-size:18px;
  border-radius:12px;
  cursor:pointer;
}
.back {
  margin-top:20px;
  color:#8ab4ff;
  text-decoration:none;
}
</style>

</head>
<body>

<h1>Deploy your GMbanditV2 Contract</h1>
<p>Deploy private version of ritual contract to Base Mainnet</p>

<button id="connectButton" style="padding:12px 20px;background:#1e5eff;border:none;border-radius:12px;color:white;font-size:18px;">
  Connect Wallet
</button>

<button id="disconnectButton" style="display:none;margin-top:15px;background:red;color:white;border:none;padding:10px 18px;border-radius:10px;">
  Disconnect
</button>

<div class="box">
  <input id="ownerAddr" placeholder="Owner Address (your wallet)">
  <input id="collectorAddr" placeholder="Collector Address (receiver wallet)">

  <button class="deploy-btn" onclick="deployContract()">Deploy Now üöÄ</button>
</div>

<a href="/" class="back">‚Üê Back to Dashboard</a>

<script>
let provider = null;
let signer = null;

async function connectWallet() {
  try {
    provider = await window.RKC.connect({
      projectId: "dbb8f3da5c5b5f3ac97a6ac3cb75e359",
      chains: [{
        id: 8453,
        name: "Base",
        rpcUrls: ["https://mainnet.base.org"]
      }]
    });

    const ethersProvider = new ethers.providers.Web3Provider(provider);
    signer = ethersProvider.getSigner();
    let address = await signer.getAddress();
    document.getElementById("connectButton").innerText = address.substring(0,6)+"..."+address.slice(-4);
    document.getElementById("disconnectButton").style.display = "inline-block";
  } catch(e) {
    alert("Connection failed: " + e.message);
  }
}

function disconnectWallet() {
  window.RKC.disconnect();
  signer = null;
  document.getElementById("connectButton").innerText = "Connect Wallet";
  document.getElementById("disconnectButton").style.display = "none";
}

async function deployContract() {
  if (!signer) {
    alert("Connect wallet first!");
    return;
  }

  alert("Deploy feature disabled for now (dummy).");
}

document.getElementById("connectButton").onclick = connectWallet;
</script>

</body>
  </html>
