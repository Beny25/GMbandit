<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Deploy GMbanditV2</title>

    <script src="https://unpkg.com/@walletconnect/modal@2.5.2/dist/index.umd.js"></script>

    <style>
        body {
            background: #0d0d16;
            margin: 0;
            font-family: Arial;
            text-align: center;
            color: #fff;
            padding: 30px;
        }
        button {
            padding: 14px 22px;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            font-size: 17px;
            margin-top: 20px;
            background: #0056ff;
            color: #fff;
        }
        .box {
            background: rgba(255,255,255,0.1);
            padding: 25px;
            border-radius: 15px;
            margin-top: 25px;
        }
        .info {
            color: #bbb;
            font-size: 15px;
            margin-top: 10px;
        }
    </style>
</head>
<body>

<h1>Deploy your GMbanditV2 Contract</h1>
<p>Private ritual version on Base Mainnet</p>

<button id="connectWallet">Connect Wallet</button>

<div id="status"></div>

<div id="deployBox" class="box" style="display:none;">
    <p><b>Your Address (Owner):</b> <span id="owner"></span></p>
    <p><b>Collector Address:</b><br> <span style="color:#4ae7ff;">0x4AE70118DD2cB814404DaAA064daB470B7F76542</span></p>

    <button id="deployBtn">Deploy Now üöÄ</button>

    <p class="info">Fee will be transferred to collector wallet</p>
</div>

<br>
<a href="/">
    <p style="color:#8ecbff;">‚Üê Back to Dashboard</p>
</a>

<script>
    const projectId = "2a3dfe7333d2ebd1e71b6d43f2f3e142"; // wallet connect demo
    const collector = "0x4AE70118DD2cB814404DaAA064daB470B7F76542";
    let provider;
    let walletAddress = null;

    async function switchToBase() {
        try {
            await provider.request({
                method: "wallet_switchEthereumChain",
                params: [{ chainId: "0x2105" }]
            });
        } catch (err) {
            console.log("Chain switch error:", err);
        }
    }

    async function connect() {
        try {
            const modal = new window.WalletConnectModal.default({
                projectId,
                themeMode: "dark"
            });

            provider = await modal.connect();

            let accounts = await provider.request({ method: "eth_accounts" });
            walletAddress = accounts[0];

            document.getElementById("status").innerHTML =
                "‚úÖ Connected: " + walletAddress.slice(0, 6) + "..." + walletAddress.slice(-4);

            document.getElementById("owner").innerHTML = walletAddress;

            document.getElementById("deployBox").style.display = "block";

            await switchToBase();
        } catch (e) {
            console.log("Connect error", e);
            alert("Connection failed: " + e.message);
        }
    }

    async function deploy() {
        if (!provider || !walletAddress) {
            alert("Connect wallet first!");
            return;
        }

        alert("‚úÖ Trigger deploy! (dummy for now)");
    }

    document.getElementById("connectWallet").onclick = connect;
    document.getElementById("deployBtn").onclick = deploy;
</script>

</body>
</html>
