<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GM Ritual</title>

<!-- Ethers.js UMD -->
<script src="https://unpkg.com/ethers@5.7.2/dist/ethers.umd.min.js"></script>

<!-- RainbowKit Connector UMD -->
<script src="https://unpkg.com/@rainbow-me/rainbowkit-connector@1.0.0/dist/rkc.js"></script>

<style>
body {
  margin: 0;
  background: #0f0f1b;
  font-family: Arial, sans-serif;
  color: white;
  text-align: center;
  padding: 40px 20px;
}
.button {
  padding: 12px 20px;
  background: #1e5eff;
  border-radius: 10px;
  color: #fff;
  border: none;
  font-size: 18px;
  cursor: pointer;
  margin: 10px;
}
.disconnect {
  padding: 10px 16px;
  background: red;
  border-radius: 10px;
  color:white;
  display:none;
  border:none;
  font-size:16px;
  margin-top:10px;
}
.ritual-btn {
  padding: 14px 24px;
  border-radius: 12px;
  border:none;
  font-size:20px;
  margin:10px;
  cursor:pointer;
}
.gm {
  background:#1d7bff;
}
.gn {
  background:#8d36ff;
}
.sleep {
  background:#333;
}
</style>
</head>

<body>

<h1>GM Ritual Dashboard âš¡</h1>

<button id="connectButton" class="button">Connect Wallet</button>
<button id="disconnectButton" class="disconnect" onclick="disconnectWallet()">Disconnect</button>

<div style="margin-top:50px;">
  <button class="ritual-btn gm" onclick="runRitual('GM')">GM Ritual ðŸŒž</button>
  <button class="ritual-btn gn" onclick="runRitual('GN')">GN Ritual ðŸŒ™</button>
  <button class="ritual-btn sleep" onclick="runRitual('SLEEP')">GoSleep Ritual ðŸ˜´</button>
</div>

<script>
let provider = null;
let signer = null;
let signerAddress = null;

async function connectWallet() {
  try {
    provider = await window.RKC.connect({
      projectId: "dbb8f3da5c5b5f3ac97a6ac3cb75e359",
      chains: [{
        id: 8453,
        name: "Base",
        rpcUrls: ["https://mainnet.base.org"]
      }]
    });

    const ethersProvider = new ethers.providers.Web3Provider(provider);
    signer = ethersProvider.getSigner();
    signerAddress = await signer.getAddress();

    document.getElementById("connectButton").innerText =
      signerAddress.substring(0,6) + "..." + signerAddress.slice(-4);

    document.getElementById("disconnectButton").style.display = "inline-block";

  } catch (e) {
    alert("Connection failed: " + e.message);
  }
}

function disconnectWallet() {
  window.RKC.disconnect();
  signer = null;
  signerAddress = null;

  document.getElementById("connectButton").innerText = "Connect Wallet";
  document.getElementById("disconnectButton").style.display = "none";
}

async function runRitual(type) {
  if (!signer) {
    alert("Connect wallet first!");
    return;
  }

  // Dummy ritual (belum ke smart contract)
  alert(type + " ritual executed!");
}

document.getElementById("connectButton").onclick = connectWallet;
</script>

</body>
</html>
